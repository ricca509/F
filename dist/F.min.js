(function(a){var b,c,d,e,f=function(a){return new f.fn.init(a)};b=this,c=Array.prototype.slice,d=function(a){for(var b=a.split("."),c=window,d=0,e=b.length;e>d;++d)c=c[b[d]];return c},e=function(a){return a.type=a.type||"default",a},f.init=function(c){if(b.F){try{delete b.F}catch(d){b.F=a}b[c]=this}},f.defineModule=function(a,c,d){var f,g,h;for(h=b,a=a.split(/\./),g=a.length,c=c||{},f=0;g>f;f++)h[a[f]]||(h[a[f]]=f===g-1&&c?e(c):{}),h=h[a[f]];!_.isUndefined(d)&&_.isFunction(d)&&d(c)},f.createInstance=function(a,b,c,e){if(!_.isObject(a)){if(!_.isString(a))return;a=d(a)}var g,h=_.extend({},a,b),i=h.type+"Module",j=f.plugins[i];return!_.isUndefined(j)&&_.isFunction(j.initModule)?(!_.isUndefined(c)&&_.isFunction(c)&&c.call(h,h),g=j.initModule.call(j,h),!_.isUndefined(e)&&_.isFunction(e)&&e.call(g,g),g):void 0},f.trimStart=function(a){return a.replace(/^\s+/,"")},f.trimEnd=function(a){return a.replace(/\s+$/,"")},f.trim=function(a){return a.replace(/(^\s+|\s+$)/g,"")},f.fn=f.prototype={init:function(b){return b===a?this:(this.args=b,this)}},f.fn.init.prototype=f.fn,f.plugins={},b.F=f}).call(this),F.plugins.defaultModule={initModule:function(a){return a}},F.plugins.pageModule={initModule:function(a){return this.assignDefaultProps(a),this.resolveSelectors(a),this.bindEvents(a),!_.isUndefined(a.init)&&_.isFunction(a.init)&&a.init.call(a),a},assignDefaultProps:function(a){a.el=a.el||"body",a.$el=$(a.el),a.$=_.bind(a.$el.find,a.$el)},resolveSelectors:function(a){var b,c={};for(b in a.UI)_.has(a.UI,b)&&(c["$"+b]=a.$(a.UI[b]));_.extend(a.UI,c)},bindEvents:function(a){var b,c,d,e;this.checkEventsObject(a);for(b in a.events)_.has(a.events,b)&&(c=this.parseEventsHandler(a,b),d=this.parseEvents(a,b),e=this.parseSelectors(a,b),this.applyBinding(a,e,d,c))},parseEvents:function(a,b){return b.split(",").join(" ")},parseSelectors:function(a,b){var c,d=a.events[b],e=_.first(_.without(d,_.last(d))).split(","),f=[],g=[],h=[];return _.each(e,function(b){b=F.trim(b),0===b.indexOf("this.")?(c=a.UI["$"+_.last(b.split("."))],c&&c instanceof jQuery&&f.push(c)):0===b.indexOf("@")?g.push(b.substring(1)):h.push(b)}),{cached:f,external:g.join(","),internal:h.join(",")}},parseEventsHandler:function(a,b){var c,d=a.events[b];if(c=_.last(d),_.isUndefined(a[c])||!_.isFunction(a[c]))throw"Incorrect handler for events "+b;return a[c]},applyBinding:function(a,b,c,d){b.internal.length>0&&a.$el.on(c,b.internal,_.bind(d,a)),b.external.length>0&&$(b.external).on(c,_.bind(d,a)),b.cached.length>0&&_.each(b.cached,function(b){b.on(c,_.bind(d,a))})},checkEventsObject:function(a){var b;if(a.events)for(b in a.events)if(_.has(a.events,b)&&(!a.events[b]||!_.isArray(a.events[b])||2!==a.events[b].length))throw"event object is incorrect"}};